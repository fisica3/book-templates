parameters:
  - name: artifactName
    type: string
    default: "arm-templates"

steps:
#  - bash: ls ./Chapter_07/deployment
#    displayName: "Lista componentes 07"  

  - task: CopyFiles@2
    displayName: "Copy JSON files to: $(Build.ArtifactStagingDirectory)/${{parameters.artifactName}}"
    inputs:
      SourceFolder: './Chapter_07/deployment'
      Contents: | 
        **/*.json
        **/*.bicep
      TargetFolder: '$(Build.ArtifactStagingDirectory)'

  - publish: '$(Build.ArtifactStagingDirectory)'
    displayName: 'Publish JSON'
    artifact: "${{parameters.artifactName}}"      
    
#  - download: current
#    artifact: "${{parameters.artifactName}}"
#    patterns: '**/*.*'
    
#  - bash: ls "$(Build.ArtifactStagingDirectory)/"
#    displayName: "Lista componentes Artifact"         
